(function(e){function t(t){for(var n,s,i=t[0],c=t[1],l=t[2],u=0,p=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/calendar-simple/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("9085")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"page"},[a("CalendarHeader",{attrs:{selectedDate:e.curDate,period:e.curPeriod,stats:e.draGnDropItems}}),a("SimpleCalendarView",{attrs:{selectedDate:e.curDate}}),a("AdvancedCalendarView",{attrs:{selectedDate:e.curDate,period:e.curPeriod,eventsArray:e.workSpaceItems}})],1)},o=[],s=(a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header"},[a("div",{staticClass:"header__info"},[a("button",{staticClass:"header__button header__button_type_menu",attrs:{type:"button"},on:{click:e.triggerAPI}}),e._m(0),a("button",{staticClass:"header__button header__button_type_today",attrs:{type:"button"},on:{click:function(t){e.selectedDate=e.getCurDate(e.selectedDate)}}},[e._v(" Сегодня ")]),a("button",{staticClass:"header__button header__button_type_change-per",attrs:{type:"button"},on:{click:function(t){e.selectedDate=e.decMonth(e.selectedDate)}}}),a("button",{staticClass:"header__button header__button_type_change-per",attrs:{type:"button"},on:{click:function(t){e.selectedDate=e.incMonth(e.selectedDate)}}}),a("div",{staticClass:"header__date"},[e._v(" "+e._s(e.months[e.selectedDate.month-1])+" "+e._s(e.selectedDate.year)+" ")])]),a("nav",{staticClass:"header__settings"},[a("button",{staticClass:"header__button header__button_type_options",attrs:{type:"button"},on:{click:e.toggleDropdown}},[e._v(e._s(e.calcPeriodName)+" ▼")]),a("div",{staticClass:"header__dropdown"},[a("span",{staticClass:"header__dropdown-elem",on:{click:function(t){e.period.days=1,e.toggleDropdown()}}},[e._v("День")]),a("span",{staticClass:"header__dropdown-elem",on:{click:function(t){e.period.days=4,e.toggleDropdown()}}},[e._v("4 Дня")]),a("span",{staticClass:"header__dropdown-elem",on:{click:function(t){e.period.days=7,e.toggleDropdown()}}},[e._v("Неделя")])])])])}),i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header__project-name"},[n("img",{staticClass:"header__project-image",attrs:{src:a("ecac"),alt:"App logo"}}),e._v(" Календарь ")])}],c=(a("d3b7"),[{album:"The White Stripes",year:1999,US_peak_chart_post:"-"},{album:"De Stijl",year:2e3,US_peak_chart_post:"-"},{album:"White Blood Cells",year:2001,US_peak_chart_post:61},{album:"Elephant",year:2003,US_peak_chart_post:6},{album:"Get Behind Me Satan",year:2005,US_peak_chart_post:3},{album:"Icky Thump",year:2007,US_peak_chart_post:2},{album:"Under Great White Northern Lights",year:2010,US_peak_chart_post:11},{album:"Live in Mississippi",year:2011,US_peak_chart_post:"-"},{album:"Live at the Gold Dollar",year:2012,US_peak_chart_post:"-"},{album:"Nine Miles from the White City",year:2013,US_peak_chart_post:"-"}]),l=["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"],d=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],u=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],p={weekdays:l,weekdayNames:d,months:u,obj_test:c},h={getCurDate:function(e){var t=new Date;return e.day=t.getDate(),e.month=t.getMonth()+1,e.year=t.getFullYear(),e},getDayOfTheWeek:function(e,t){var a=new Date(e.year,e.month-1,e.day+t);return a.getDay()}},_=a("16d0"),m={name:"CalendarHeader",created:function(){this.json2csv=a("1fd8"),this.pizzly=new _["a"]({host:"https://psyc-calendar.herokuapp.com/",publishableKey:"pope8Qy8qfYyppnHRMgLMpQ8MuEUKDGeyhfGCj"}),this.spreadsheetId="1Ruh0BsRYzwbePVC8SczTSGxLRlNQtCyCMZn7ez0W14U",this.authId="20d47430-9980-11eb-849a-795b78c342fc",this.getCurDate=h.getCurDate,this.months=p.months},mounted:function(){this.dropdown=document.querySelector(".header__dropdown")},data:function(){return{}},computed:{calcPeriodName:function(){return 7===this.period.days?"Неделя":4===this.period.days?"4 Дня":"День"}},methods:{triggerAPI:function(){var e=this.json2csv(this.stats);console.log("STATS\n",e),this.pizzly.integration("google-sheets").auth(this.authId).post("".concat(this.spreadsheetId,":batchUpdate"),{body:JSON.stringify({requests:[{pasteData:{coordinate:{sheetId:0,rowIndex:0,columnIndex:0},data:e,type:"PASTE_VALUES",delimiter:","}}],includeSpreadsheetInResponse:!1,responseRanges:[],responseIncludeGridData:!1})}).then((function(e){return e.ok?(window.alert("Data was successfully retrieved"),e.json()):new Promise.reject(e.status)})).then((function(e){console.log(e)})).catch((function(e){window.alert("API encountered error with status:\n".concat(e))}))},decMonth:function(e){return e.month-=1,e.month||(e.month=12,e.year-=1),e},incMonth:function(e){return e.month+=1,e.month>12&&(e.month=1,e.year+=1),e},toggleDropdown:function(){this.dropdown.classList.toggle("header__dropdown_visible")}},props:{selectedDate:Object,period:Object,stats:Array}},f=m,g=a("2877"),y=Object(g["a"])(f,s,i,!1,null,"3842a69d",null),v=y.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"calendar-mini"},[a("h3",{staticClass:"calendar-mini__heading"},[e._v(" "+e._s(e.months[e.selectedDate.month-1])+" "+e._s(e.selectedDate.year)+" ")]),a("div",{staticClass:"calendar-mini__table"},[e._l(7,(function(t){return a("div",{key:"dayName"+t,staticClass:"calendar-mini__cell calendar-mini__cell_type_weekday"},[e._v(" "+e._s(e.weekdayNamesShort[t-1])+" ")])})),e._l(new Date(e.selectedDate.year,e.selectedDate.month,0).getDate(),(function(t){return a("div",{key:t,staticClass:"calendar-mini__cell",on:{click:function(t){e.prevSelectedDay=e.handleCellClick(t,e.selectedDate,e.prevSelectedDay)}}},[e._v(" "+e._s(t)+" ")])}))],2)])},w=[],D={name:"SimpleCalendarView",created:function(){this.months=p.months,this.weekdayNamesShort=p.weekdays,this.getDayOfTheWeek=h.getDayOfTheWeek},data:function(){return{prevSelectedDay:""}},computed:{},methods:{handleCellClick:function(e,t,a){var n=e.target;return a&&a.classList.remove("calendar-mini__cell_selected"),n.classList.add("calendar-mini__cell_selected"),t.day=parseInt(n.textContent),n}},props:{selectedDate:Object}},k=D,C=Object(g["a"])(k,b,w,!1,null,"3ae03b31",null),S=C.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-space"},[a("div",{staticClass:"weekdays-row",style:e.calcWeekRowAlignment},e._l(e.period.days,(function(t){return a("div",{key:"day"+t,staticClass:"weekdays-row__cell"},[e._v(" "+e._s(e.weekdays[e.getDayOfTheWeek(e.selectedDate,t-1)])+" "),a("h2",{staticClass:"weekdays-row__day"},[e._v(e._s(e.selectedDate.day+t-1))])])})),0),a("div",{staticClass:"date-cell",style:e.calcTableSz},[a("div"),e._l(e.period.days,(function(e){return a("div",{key:"border-day"+e,staticClass:"date-cell__border-gap"})})),a("div",{staticStyle:{"min-height":"100%",width:"100%",display:"flex","flex-direction":"column"}},e._l(24,(function(t){return a("div",{key:"timeline-cell"+t,staticClass:"date-cell__border-gap date-cell__border-gap_type_vertical"},[a("span",{staticStyle:{position:"relative",right:"30px",bottom:"6px"}},[e._v(e._s(t-1)+":00")])])})),0),e._l(e.period.days,(function(t){return a("div",{key:"column"+t,staticClass:"date-cell__contents"},[a("TableCell",{attrs:{column:t,items:e.eventsArray}}),e._l(24,(function(e){return a("div",{key:"column"+t+"cell"+e,staticClass:"date-cell__table-cell",attrs:{row:e}})}))],2)}))],2)])},O=[],T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"drag-n-drop__drop-zone",on:{drop:e.onDrop,dragover:function(e){e.preventDefault()},dragenter:function(e){e.preventDefault()}}},e._l(e.filteredItems,(function(t){return a("div",{directives:[{name:"resize",rawName:"v-resize",value:{callOnAdd:!1},expression:"{ callOnAdd: false }"}],key:t.id,staticClass:"drag-n-drop__drag-item",style:e.renderItem(t),attrs:{draggable:"true"},on:{resize:function(a){return e.onResize(a,t)},click:e.onClick,dragstart:function(a){return e.onDragStart(a,t)}}},[e._v(" "+e._s(t.title)+" ")])})),0)},j=[],M=(a("a9e3"),a("4de4"),a("7db0"),{name:"TableCell",created:function(){},props:{items:Array,column:Number},computed:{filteredItems:function(){var e=this;return this.items.filter((function(t){return t.column===e.column}))}},methods:{onResize:function(e,t){t.firstRender?t.firstRender=!1:(t.height=e.detail.height,t.firstRender=!0)},renderItem:function(e){return{top:"calc(100% / 24 * ".concat(e.row-1),height:"".concat(e.height,"px"),color:e.isTarget?"hsl(279, 89%, 36%)":"white"}},onDragStart:function(e,t){console.log("Picked at:",e.target),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setData("itemID",t.id)},onDrop:function(e){e.target.classList.add("drag-n-drop");var t=document.elementFromPoint(e.clientX,e.clientY);e.target.classList.remove("drag-n-drop"),console.log("Dropped at:",t);var a=e.dataTransfer.getData("itemID"),n=this.items.find((function(e){return e.id===a}));n.column=this.column,n.row=parseInt(t.attributes["row"].textContent)},onClick:function(e){e.target.classList.toggle("drag-n-drop__drag-item_striked")}}}),x=M,A=Object(g["a"])(x,T,j,!1,null,"49d76185",null),R=A.exports,P={name:"AdvancedCalendarView",components:{TableCell:R},created:function(){this.months=p.months,this.weekdays=p.weekdays,this.getDayOfTheWeek=h.getDayOfTheWeek},mounted:function(){},updated:function(){},data:function(){return{}},computed:{calcTableSz:function(){return{"grid-template-columns":"10px repeat(".concat(this.period.days,", 1fr)")}},calcWeekRowAlignment:function(){return{"justify-content":1===this.period.days?"flex-start":"space-around","padding-left":1===this.period.days?"40px":"0"}}},methods:{},props:{eventsArray:Array,selectedDate:Object,period:Object}},E=P,z=Object(g["a"])(E,I,O,!1,null,"339682d2",null),U=z.exports,W=[["тренировка","звонок","отдых"],["покупка","свидание","встреча"],["оплата","поездка","экзамен"],["собрание","уборка","работа"],["отдых","встреча","собрание"],["экзамен","оплата","работа"]],N=[["выходной","отпуск","магазин","пробежка","переезд","ужин","офис","занятие","лекция"],["выходной","отпуск","магазин","пробежка","переезд","ужин","офис","занятие","лекция"],["выходной","отпуск","магазин","пробежка","переезд","ужин","офис","занятие","лекция"],["выходной","отпуск","магазин","пробежка","переезд","ужин","офис","занятие","лекция"],["выходной","отпуск","магазин","пробежка","переезд","ужин","офис","занятие","лекция"],["выходной","отпуск","магазин","пробежка","переезд","ужин","офис","занятие","лекция"]];function G(){var e=Math.floor(Math.random()*W.length);return[W[e],N[e]]}var L={name:"App",created:function(){this.pullSet=G()},mounted:function(){this.workSpaceItems=this.genWorkSpace(15,.5)},data:function(){return{curDate:h.getCurDate({}),curPeriod:{days:7},draGnDropItems:[{id:"it0",row:12,column:1,duration:15,height:1,title:"Item A",firstRender:!0},{id:"it1",row:7,column:1,duration:15,height:1,title:"Item B",firstRender:!0},{id:"it2",row:4,column:2,duration:15,height:1,title:"Item C",firstRender:!0},{id:"it3",row:4,column:1,duration:15,height:1,title:"Item D",firstRender:!0},{id:"it4",row:4,column:6,duration:15,height:1,title:"Item E",firstRender:!0},{id:"it5",row:6,column:5,duration:15,height:1,title:"Item F",firstRender:!0},{id:"it6",row:9,column:7,duration:15,height:1,title:"Item G",firstRender:!0}],workSpaceItems:[]}},components:{CalendarHeader:v,AdvancedCalendarView:U,SimpleCalendarView:S},computed:{},methods:{genDragItem:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{id:"act".concat(t.row).concat(t.column),row:t.row,column:t.column,duration:15,height:1,title:e,firstRender:!0,isTarget:a}},genWorkSpace:function(e,t){var a=[];console.log("TARGETS TO GENERATE:",Math.ceil(e*t));for(var n=0;n<this.curPeriod.days;++n)for(var r=Math.ceil(e*t),o=0;o<e;++o)e-o!==r?Math.random()>.5&&r?(a.push(this.genDragItem(this.pullSet[0][Math.floor(Math.random()*this.pullSet[0].length)],{column:n+1,row:o+1},!0)),--r):a.push(this.genDragItem(this.pullSet[1][Math.floor(Math.random()*this.pullSet[1].length)],{column:n+1,row:o+1})):(a.push(this.genDragItem(this.pullSet[0][Math.floor(Math.random()*this.pullSet[0].length)],{column:n+1,row:o+1},!0)),--r);return a}}},V=L,$=(a("034f"),Object(g["a"])(V,r,o,!1,null,null,null)),B=$.exports,H=a("06aa"),Y=a.n(H);n["a"].config.productionTip=!1,n["a"].use(Y.a),new n["a"]({render:function(e){return e(B)}}).$mount("#app")},9085:function(e,t,a){},ecac:function(e,t,a){e.exports=a.p+"img/calendar-image.131994ee.svg"}});
//# sourceMappingURL=app.ad6f8c5e.js.map